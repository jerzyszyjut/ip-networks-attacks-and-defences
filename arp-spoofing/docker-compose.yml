services:
  gateway:
    build:
      context: gateway
    container_name: gateway
    hostname: gateway
    cap_add:
      - NET_ADMIN
    networks:
      wan_net:
      lan_net:
        ipv4_address: 10.5.0.254
        mac_address: 02:42:0a:05:00:fe

  attacker:
    build:
      context: attacker
    container_name: attacker
    hostname: attacker
    cap_add:
      - NET_ADMIN
    privileged: true
    networks:
      lan_net:
        ipv4_address: 10.5.0.10
        mac_address: 02:42:0a:05:00:0a
    depends_on:
      - gateway
  victim:
    build:
      context: victim
    container_name: victim
    hostname: victim
    cap_add:
      - NET_ADMIN
    networks:
      lan_net:
        ipv4_address: 10.5.0.20
        mac_address: 02:42:0a:05:00:14
    depends_on:
      - gateway

networks:
  wan_net:
    driver: bridge
  lan_net:
    driver: bridge
    ipam:
      config:
        - subnet: 10.5.0.0/24
